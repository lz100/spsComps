<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add CSS loaders from server — addLoader • spsComps</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add CSS loaders from server — addLoader"><meta property="og:description" content="Add/remove CSS loaders from server to any Shiny/HTML component.
It is useful to indicate busy status when some code is running in the server
and when it finishes, remove the loader to indicate clear status."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spsComps</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.3.99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lz100/spsComps/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add CSS loaders from server</h1>
    <small class="dont-index">Source: <a href="https://github.com/lz100/spsComps/blob/HEAD/R/css_loader.R" class="external-link"><code>R/css_loader.R</code></a></small>
    <div class="hidden name"><code>addLoader.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add/remove CSS loaders from server to any Shiny/HTML component.
It is useful to indicate busy status when some code is running in the server
and when it finishes, remove the loader to indicate clear status.</p>
    </div>


    <div id="value">
    <h2>Value</h2>
    

<p>CSS load in R6 class</p>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-spsComps_loader-new"><code>addLoader$new()</code></a></p></li>
<li><p><a href="#method-spsComps_loader-show"><code>addLoader$show()</code></a></p></li>
<li><p><a href="#method-spsComps_loader-hide"><code>addLoader$hide()</code></a></p></li>
<li><p><a href="#method-spsComps_loader-destroy"><code>addLoader$destroy()</code></a></p></li>
<li><p><a href="#method-spsComps_loader-recreate"><code>addLoader$recreate()</code></a></p></li>
<li><p><a href="#method-spsComps_loader-clone"><code>addLoader$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-spsComps_loader-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>create a loader object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/addLoader.html">addLoader</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  target_selector <span class="op">=</span> <span class="st">""</span>,</span>
<span>  isID <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  src <span class="op">=</span> <span class="st">""</span>,</span>
<span>  id <span class="op">=</span> <span class="st">""</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width <span class="op">=</span> <span class="va">height</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"#337ab7"</span>,</span>
<span>  opacity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"replace"</span>,</span>
<span>  block <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bg_color <span class="op">=</span> <span class="st">"#eee"</span>,</span>
<span>  footer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  z_index <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  alert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/domains.html" class="external-link">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>target_selector</code></dt>
<dd><p>string, which Shiny component you want to add the
loader to? a shiny component ID or a valid CSS selector if <code>isID = FLASE</code>.
for example, you have a button and want to add animation to it:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">actionButton</span>(<span class="dt">inputId =</span> <span class="st">"btn"</span>)</span></code></pre><p></p></div>
<p>This function is used in server only, so if you are in shiny module,
use <code>ns()</code> for ID on UI but <strong>DO NOT</strong> add the <code>ns()</code> wrapper on server.</p>
<p>UI</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">actionButton</span>(<span class="dt">inputId =</span> <span class="kw">ns</span>(<span class="st">"btn"</span>))</span></code></pre><p></p></div>
<p>server</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a>addLoader<span class="op">$</span><span class="kw">new</span>(<span class="dt">target_selector =</span> <span class="st">"btn"</span>, ...)</span></code></pre><p></p></div></dd>


<dt><code>isID</code></dt>
<dd><p>bool, is your selector an ID?</p></dd>


<dt><code>type</code></dt>
<dd><p>string, one of  "circle", "dual-ring", "facebook", "heart",
"ring", "roller", "default", "ellipsis", "grid", "hourglass", "ripple",
"spinner", "gif", default is "default".</p></dd>


<dt><code>src</code></dt>
<dd><p>string, online URL or local path of the gif animation file if
you would like to upload your own loader.</p></dd>


<dt><code>id</code></dt>
<dd><p>string, the unqiue ID for the loader, if not provided, a random
ID will be given. If you are using shiny modules, DO NOT use <code>session$ns('YOUR_ID')</code>
to wrap it. Loaders live on the top level of the document.</p></dd>


<dt><code>height</code></dt>
<dd><p>string, (r)em, "1.5rem", "1.5em", or pixel, like "10px".
Default is <code>NULL</code>, will be automatically calculated based on the target
component. It is recommend to use <code>NULL</code> for "replace" and "inline" method
to let it automatically be calculated, but required for "full_screen" method.</p></dd>


<dt><code>width</code></dt>
<dd><p>string, default is the same as <code>height</code> to make it square.</p></dd>


<dt><code>color</code></dt>
<dd><p>string, any valid CSS color name, or hex color code</p></dd>


<dt><code>opacity</code></dt>
<dd><p>number, between 0-1</p></dd>


<dt><code>method</code></dt>
<dd><p>one of "replace", "inline", "full_screen", see details</p></dd>


<dt><code>block</code></dt>
<dd><p>bool, for some input components, once the loader starts,
it can also block user interaction with the component, very useful for
"inline" method, eg. prevent users from clicking the button while some
process is still running.</p></dd>


<dt><code>center</code></dt>
<dd><p>bool, try to place the load to the center of the target for
"inline" and "replace" and center of the screen for "full_screen".</p></dd>


<dt><code>bg_color</code></dt>
<dd><p>string, any valid CSS color name, or hex color code. Only
works for "full_screen" method.</p></dd>


<dt><code>footer</code></dt>
<dd><p>Additional Shiny/HTML component to add below the loader, like
a title <code>h1("load title")</code>. <code>inline</code> method does not have a footer.</p></dd>


<dt><code>z_index</code></dt>
<dd><p>number, only works for "full_screen" method, what CSS layer
should the overlay be places. In HTML, all elements have the default of 0.</p></dd>


<dt><code>alert</code></dt>
<dd><p>bool, should alert if target cannot be found or other javascript
errors? mainly for debugging</p></dd>


<dt><code>session</code></dt>
<dd><p>shiny session</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>

<div class="section">
<h5 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h5>

<ul><li><p><code>replace</code>: use a HTML <code>div</code> with the same CSS styles to <strong>replace the original</strong>
<strong>target</strong>, but add the loader inside and remove original content inside. When the
loader is <code>hide</code>, show the original <code>div</code> and hide this loader <code>div</code>. Height
and width is the original <code>div</code>'s height unless specially specified. Good
example of this will be some plot outputs.</p></li>
<li><p><code>inline</code>: append the loader as the first child of target HTML container.
loader's height and width is the original <code>div</code>'s height unless specially specified.
In addition, this methods will <strong>disable</strong> all inputs and buttons inside the
target container, so this method can be useful on some buttons.</p></li>
<li><p><code>full_screen</code>: Do not change anything of the target HTML container, add
an overlay to <strong>cover the whole page</strong> when <code>show</code> and hide the overlay when <code>hide</code>.
This method requires the <code>height</code> to be specified manually. Under this method,
<code>bg_color</code> and <code>z_index</code> can also be changed.</p></li>
</ul></div>

<div class="section">
<h5 id="new-container">New container<a class="anchor" aria-label="anchor" href="#new-container"></a></h5>


<p><code>addLoader$new()</code> method only stores the loader information, the loader is
add to your docuement upon the first time <code>addLoader$show()</code> is called.</p>
</div>

<div class="section">
<h5 id="required-javascript-and-css-files">Required javascript and css files<a class="anchor" aria-label="anchor" href="#required-javascript-and-css-files"></a></h5>


<p>Since spsComps 0.3.1 all dependencies will be added automatically. If you
don't see them working, try to  manually add
<code>spsDepend('addLoader')</code> or <code>spsDepend('css-loader')</code> (old name) somewhere in your
UI to add the dependency.</p>
</div>

</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A R6 loader object</p>
</div>

</div><p></p><hr><a id="method-spsComps_loader-show"></a><div class="section">
<h3 id="method-show-">Method <code>show()</code><a class="anchor" aria-label="anchor" href="#method-show-"></a></h3>
<p>show the loader</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">addLoader</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span>alert <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>alert</code></dt>
<dd><p>bool, if the target selector or loader is not found,
alert on UI? For debugging purposes.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>Make sure your target element is visible when the time you call this <code>show</code>
method, otherwise, you will not get it if height and width is rely on
auto-calculation for "replace" and "inline" method. "full_screen" method
is not affected.</p>
</div>


</div><p></p><hr><a id="method-spsComps_loader-hide"></a><div class="section">
<h3 id="method-hide-">Method <code>hide()</code><a class="anchor" aria-label="anchor" href="#method-hide-"></a></h3>
<p>hide the loader</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">addLoader</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span>alert <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>alert</code></dt>
<dd><p>bool, if the target selector or loader is not found,
alert on UI? For debugging purposes.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-spsComps_loader-destroy"></a><div class="section">
<h3 id="method-destroy-">Method <code>destroy()</code><a class="anchor" aria-label="anchor" href="#method-destroy-"></a></h3>
<p>Destroy current loader</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">addLoader</span><span class="op">$</span><span class="fu">destroy</span><span class="op">(</span>alert <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>alert</code></dt>
<dd><p>bool, if the target selector or loader is not found,
alert on UI? For debugging purposes.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>
<p>hide and remove current loader from the current document</p>
</div>


</div><p></p><hr><a id="method-spsComps_loader-recreate"></a><div class="section">
<h3 id="method-recreate-">Method <code>recreate()</code><a class="anchor" aria-label="anchor" href="#method-recreate-"></a></h3>
<p>recreate the loader</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">addLoader</span><span class="op">$</span><span class="fu">recreate</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  src <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="st">""</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width <span class="op">=</span> <span class="va">height</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"#337ab7"</span>,</span>
<span>  opacity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"replace"</span>,</span>
<span>  block <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bg_color <span class="op">=</span> <span class="st">"#eee"</span>,</span>
<span>  footer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  z_index <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  alert <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>type</code></dt>
<dd><p>string, one of  "circle", "dual-ring", "facebook", "heart",
"ring", "roller", "default", "ellipsis", "grid", "hourglass", "ripple",
"spinner", "gif", default is "default".</p></dd>


<dt><code>src</code></dt>
<dd><p>string, online URL or local path of the gif animation file if
you would like to upload your own loader.</p></dd>


<dt><code>id</code></dt>
<dd><p>string, the unqiue ID for the loader, if not provided, a random
ID will be given. If you are using shiny modules, DO NOT use <code>session$ns('YOUR_ID')</code>
to wrap it. Loaders live on the top level of the document.</p></dd>


<dt><code>height</code></dt>
<dd><p>string, (r)em, "1.5rem", "1.5em", or pixel, like "10px".
Default is <code>NULL</code>, will be automatically calculated based on the target
component. It is recommend to use <code>NULL</code> for "replace" and "inline" method
to let it automatically be calculated, but required for "full_screen" method.</p></dd>


<dt><code>width</code></dt>
<dd><p>string, default is the same as <code>height</code> to make it square.</p></dd>


<dt><code>color</code></dt>
<dd><p>string, any valid CSS color name, or hex color code</p></dd>


<dt><code>opacity</code></dt>
<dd><p>number, between 0-1</p></dd>


<dt><code>method</code></dt>
<dd><p>one of "replace", "inline", "full_screen", see details</p></dd>


<dt><code>block</code></dt>
<dd><p>bool, for some input components, once the loader starts,
it can also block user interaction with the component, very useful for
"inline" method, eg. prevent users from clicking the button while some
process is still running.</p></dd>


<dt><code>center</code></dt>
<dd><p>bool, try to place the load to the center of the target for
"inline" and "replace" and center of the screen for "full_screen".</p></dd>


<dt><code>bg_color</code></dt>
<dd><p>string, any valid CSS color name, or hex color code. Only
works for "full_screen" method.</p></dd>


<dt><code>footer</code></dt>
<dd><p>Additional Shiny/HTML component to add below the loader, like
a title <code>h1("load title")</code>. <code>inline</code> method does not have a footer.</p></dd>


<dt><code>z_index</code></dt>
<dd><p>number, only works for "full_screen" method, what CSS layer
should the overlay be places. In HTML, all elements have the default of 0.</p></dd>


<dt><code>alert</code></dt>
<dd><p>bool, should alert if target cannot be found or other javascript
errors? mainly for debugging</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-3">Details<a class="anchor" aria-label="anchor" href="#details-3"></a></h4>
<p>This method will first disable then destroy (remove) current loader,
and finally store new information of the new loader.</p>
<p><strong>Note:</strong>: this method only refresh loader object on the server, the loader
is <strong>not</strong> recreated until the next time <code>show</code> method is called.</p>
</div>


</div><p></p><hr><a id="method-spsComps_loader-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">addLoader</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">fluidPage</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">h4</span><span class="op">(</span><span class="st">"Use buttons to show and hide loaders with different methods"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="spsDepend.html">spsDepend</a></span><span class="op">(</span><span class="st">"addLoader"</span><span class="op">)</span>, <span class="co"># optional</span></span></span>
<span class="r-in"><span>    <span class="va">tags</span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"Replace"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"b_re_start"</span>, <span class="st">"Replace"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"b_re_stop"</span>, <span class="st">"stop replace"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">br</span><span class="op">(</span><span class="op">)</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"Inline"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"b_in_start"</span>, <span class="st">"Inline"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"b_in_stop"</span>, <span class="st">"stop inline"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">br</span><span class="op">(</span><span class="op">)</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"Full screen"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"b_fs_start"</span>, <span class="st">"Full screen 2s"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">h4</span><span class="op">(</span><span class="st">"Add loaders to a big HTML chunk"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"chunk_start"</span>, <span class="st">"Chunk loader"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">actionButton</span><span class="op">(</span><span class="st">"chunk_stop"</span>, <span class="st">"Stop"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">column</span><span class="op">(</span><span class="fl">6</span>,</span></span>
<span class="r-in"><span>           id <span class="op">=</span> <span class="st">"chunk"</span>,</span></span>
<span class="r-in"><span>           style <span class="op">=</span> <span class="st">"background-color: #eee"</span>,</span></span>
<span class="r-in"><span>           <span class="fu">h5</span><span class="op">(</span><span class="st">"Here is some text 12345"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="va">tags</span><span class="op">$</span><span class="fu">hr</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="fu">icon</span><span class="op">(</span><span class="st">"house"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="fu">p</span><span class="op">(</span><span class="st">"blablablablablablablablablablablablablablablablablablablabla"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="fu">p</span><span class="op">(</span><span class="st">"blablablablablablablablablablablablablablablablablablablabla"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="fu">p</span><span class="op">(</span><span class="st">"blablablablablablablablablablablablablablablablablablablabla"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="fu">p</span><span class="op">(</span><span class="st">"blablablablablablablablablablablablablablablablablablablabla"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># Init loaders</span></span></span>
<span class="r-in"><span>    <span class="va">loader_replace</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"b_re_start"</span>, type <span class="op">=</span> <span class="st">"facebook"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">loader_inline</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"b_in_start"</span>, color <span class="op">=</span> <span class="st">"green"</span>, method <span class="op">=</span> <span class="st">"inline"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">loader_fs</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"b_fs_start"</span>, color <span class="op">=</span> <span class="st">"pink"</span>, method <span class="op">=</span> <span class="st">"full_screen"</span>,</span></span>
<span class="r-in"><span>      bg_color <span class="op">=</span> <span class="st">"#eee"</span>, height <span class="op">=</span> <span class="st">"30rem"</span>, type <span class="op">=</span> <span class="st">"heart"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">loader_chunk</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"chunk"</span>, type <span class="op">=</span> <span class="st">"spinner"</span>, color <span class="op">=</span> <span class="st">"orange"</span>,</span></span>
<span class="r-in"><span>      footer <span class="op">=</span> <span class="fu">h5</span><span class="op">(</span><span class="st">"chunk loader"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># toggle loaders</span></span></span>
<span class="r-in"><span>    <span class="co">## replace</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">b_re_start</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_replace</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">b_re_stop</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_replace</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## inline</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">b_in_start</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_inline</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">b_in_stop</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_inline</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## full screen</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">b_fs_start</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_fs</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">loader_fs</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## chunk</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">chunk_start</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_chunk</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">chunk_stop</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">loader_chunk</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">bootstrapPage</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="spsDepend.html">spsDepend</a></span><span class="op">(</span><span class="st">"addLoader"</span><span class="op">)</span>, <span class="co"># optional</span></span></span>
<span class="r-in"><span>    <span class="fu">h4</span><span class="op">(</span><span class="st">"Add loaders to Shiny `render` events"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">tags</span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"Replace"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">selectizeInput</span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"n_re"</span>,</span></span>
<span class="r-in"><span>                   label <span class="op">=</span> <span class="st">"Change this to render the following plot"</span>,</span></span>
<span class="r-in"><span>                   choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">plotOutput</span><span class="op">(</span>outputId <span class="op">=</span> <span class="st">"p_re"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">br</span><span class="op">(</span><span class="op">)</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"Full screen"</span><span class="op">)</span>, <span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">selectInput</span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"n_fs"</span>,</span></span>
<span class="r-in"><span>                label <span class="op">=</span> <span class="st">"Change this to render the following plot"</span>,</span></span>
<span class="r-in"><span>                choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">plotOutput</span><span class="op">(</span>outputId <span class="op">=</span> <span class="st">"p_fs"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># create loaders</span></span></span>
<span class="r-in"><span>    <span class="va">l_re</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"p_re"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">l_fs</span> <span class="op">&lt;-</span> <span class="va">addLoader</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"p_fs"</span>, color <span class="op">=</span> <span class="st">"pink"</span>, method <span class="op">=</span> <span class="st">"full_screen"</span>,</span></span>
<span class="r-in"><span>      bg_color <span class="op">=</span> <span class="st">"#eee"</span>, height <span class="op">=</span> <span class="st">"30rem"</span>, type <span class="op">=</span> <span class="st">"grid"</span>,</span></span>
<span class="r-in"><span>      footer <span class="op">=</span> <span class="fu">h4</span><span class="op">(</span><span class="st">"Replotting..."</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># use loaders in rednering</span></span></span>
<span class="r-in"><span>    <span class="va">output</span><span class="op">$</span><span class="va">p_re</span> <span class="op">&lt;-</span> <span class="fu">renderPlot</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="va">l_re</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="co"># to make it responsive</span></span></span>
<span class="r-in"><span>      <span class="co"># (always create a new one by calculating the new height and width)</span></span></span>
<span class="r-in"><span>      <span class="va">l_re</span><span class="op">$</span><span class="fu">recreate</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">faithful</span><span class="op">$</span><span class="va">eruptions</span>,</span></span>
<span class="r-in"><span>           probability <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>           breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">n_re</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           xlab <span class="op">=</span> <span class="st">"Duration (minutes)"</span>,</span></span>
<span class="r-in"><span>           main <span class="op">=</span> <span class="st">"Geyser eruption duration"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">output</span><span class="op">$</span><span class="va">p_fs</span> <span class="op">&lt;-</span> <span class="fu">renderPlot</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="va">l_fs</span><span class="op">$</span><span class="fu">hide</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">l_fs</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">faithful</span><span class="op">$</span><span class="va">eruptions</span>,</span></span>
<span class="r-in"><span>           probability <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>           breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">n_fs</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           xlab <span class="op">=</span> <span class="st">"Duration (minutes)"</span>,</span></span>
<span class="r-in"><span>           main <span class="op">=</span> <span class="st">"Geyser eruption duration"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span>  <span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://lezhang.me/" class="external-link">Le Zhang</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

